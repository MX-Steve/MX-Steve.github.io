var styleChange={pause:{},play:{},plsbutton:{}};styleChange.play.change=function(){$("#play").addClass("hidden");$("#pause").removeClass("hidden");$("#play").html("开")};styleChange.pause.change=function(){$("#pause").addClass("hidden");$("#play").removeClass("hidden");$("#pause").html("关")};styleChange.plsbutton.change=function(){$("#t_pls_show").addClass("selectpls");$("#t_pls_show").removeClass("noselectpls")};styleChange.plsbutton.recovery=function(){$("#t_pls_show").addClass("noselectpls");$("#t_pls_show").removeClass("selectpls")};function initAudio(b){var f=b.attr("t_name");var e=b.attr("t_cover");var a=b.attr("t_artist");$(".title").text(" - "+f);$(".artist").text(a);$("#t_cover").html('<img src="images/player01.jpg">')}$(document).ready(function(){var b,j,i,a,e,h;var g=0;$("#playlist ul li a").click(function(){$("#t_title_info").animate({top:"-1.5em",opacity:"hide"},0);initAudio($(this).parent("li"));$("#error").text("");styleChange.play.change();console.log(a);if(a){a[0].pause();a[0].currentTime=0;$("li").removeClass("active")}a=$(this).next("audio");$(this).parent("li").addClass("active");a[0].play()});$("#t_progress").slider({value:0,orientation:"horizontal",range:"min",animate:true,step:1});$("audio").on("timeupdate",function(){a[0].volume=i/100;d=this.duration;c=this.currentTime;curM=Math.floor(c/60);curS=Math.round(c-curM*60);$("#current").text(curM+":"+curS);$("#t_progress").slider({max:d,min:0,value:c})});$("audio").on("playing",function(){b=this.duration;j=Math.floor(b/60)+":"+Math.round((b-Math.floor(b/60))/10);$("#duration").text(j);$(this).parent("li").addClass("active");$("#t_title_info").animate({top:"0em",opacity:"show"},500)});$("audio").on("ended",function(){a=$(this).parent("li").next("li").first();a=a.children("audio");$(this).parent("li").addClass("active");var k=$("li.active").next();$("li").removeClass("active");if(a[0]){initAudio(k);a[0].play()}else{$("#error").text("00");$("#t_cover").html('<img src="../images/playerlogo.png">')}});$("#play").click(function(){if(a){a[0].play();styleChange.play.change();$("#error").text("")}else{$("#error").text("还没有选择歌曲哦")}});$("#pause").click(function(){if(a){a[0].pause();styleChange.pause.change()}else{$("#error").text("有一点小问题哦")}});$("#next").click(function(){a[0].pause();a[0].currentTime=0;a=a.parent("li").next("li").first();a=a.children("audio");var k=$("li.active").next();$("#t_title_info").animate({top:"-1.25em",opacity:"hide"},0);$("li").removeClass("active");if(a[0]){initAudio(k);a[0].play()}else{$("#error").text("已经是最后一首了哦");$("#t_cover").html('<img src="images/logo.png">');a=null}});$("#prev").click(function(){a[0].pause();a[0].currentTime=0;a=a.parent("li").prev("li").last();a=a.children("audio");var k=$("li.active").prev();$("li").removeClass("active");$("#t_title_info").animate({top:"-1.25em",opacity:"hide"},0);if(a[0]){initAudio(k);a[0].play()}else{$("#error").text("前面没有歌曲了哦");$("#t_cover").html('<img src="images/logo.png">');a=null}});$("#rangeVal").slider({value:60,orientation:"horizontal",range:"min",animate:true,step:1});i=$("#rangeVal").slider("value");$("#val").text(i);var f=$("#val");f.hide();$("#rangeVal").slider({start:function(k,l){f.fadeIn("fast")},stop:function(k,l){f.fadeOut("fast")},slide:function(k,l){i=l.value;f.css("left",i-30).text(l.value);$("#val").text(i);if(a){a[0].volume=i/100}else{$("#error").text("56")}}});$("#t_progress").slider({start:function(k,l){a[0].pause()},stop:function(k,l){h=l.value;a[0].currentTime=h;a[0].play();styleChange.play.change()}});$("#t_pls_show").click(function(){if(g==0){styleChange.plsbutton.change();g=1}else{styleChange.plsbutton.recovery();g=0}$("#playlist").slideToggle()})});